# 通知仕様
イベント名毎に仕様を記載する。

SSEはServerSentEventsで通知されるdataの中身を表す。

FCMはFirebaseCloudMessagingで通知される情報を表す。記載されていない場合は、そのイベントはFCMで通知されない。


## USER_JOINED
ユーザーが新規登録された。

### SSE
対象: 全員

+ `id`: 登録されたユーザーのId

## USER_UPDATED
ユーザーの情報が更新された。

### SSE
対象: 全員

+ `id`: 情報が更新されたユーザーのId

## USER_TAGS_UPDATED
ユーザーのタグが更新された。

### SSE
対象: 全員

+ `id`: タグが更新されたユーザーのId

## USER_GROUP_CREATED
ユーザーグループが作成された

### SSE
対象: 全員

+ `id`: 作成されたユーザーグループのId

## USER_GROUP_DELETED
ユーザーグループが削除された

### SSE
対象: 全員

+ `id`: 削除されたユーザーグループのId

## USER_GROUP_MEMBER_ADDED
ユーザーグループにユーザーが追加された

### SSE
対象: 全員

+ `id`: ユーザーグループのId
+ `user_id`: 追加されたユーザーのId

## USER_GROUP_MEMBER_REMOVED
ユーザーグループからユーザーが削除された

### SSE
対象: 全員

+ `id`: ユーザーグループのId
+ `user_id`: 削除されたユーザーのId

## USER_ICON_UPDATED
ユーザーのアイコンが更新された。

### SSE
対象: 全員

+ `id`: アイコンが更新されたユーザーのId

## USER_ONLINE
ユーザーがオンラインになった。

### SSE
対象: 全員

+ `id`: オンラインになったユーザーのId

## USER_OFFLINE
ユーザーがオフラインになった。

### SSE
対象: 全員

+ `id`: オフラインになったユーザーのId

## CHANNEL_CREATED
チャンネルが新規作成された。

### SSE
対象: 全員

+ `id`: 作成されたチャンネルのId

## CHANNEL_DELETED
チャンネルが削除された。

### SSE
対象: 全員

+ `id`: 削除されたチャンネルのId

## CHANNEL_UPDATED
チャンネルの名前またはトピックが変更された。

### SSE
対象: 全員

+ `id`: 変更があったチャンネルのId

## CHANNEL_STARED
自分がチャンネルをスターした。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: スターしたチャンネルのId

## CHANNEL_UNSTARED
自分がチャンネルのスターを解除した。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: スターしたチャンネルのId

## CHANNEL_MUTED
自分がチャンネルをミュートした。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: ミュートしたチャンネルのId

## CHANNEL_UNMUTED
自分がチャンネルのミュートを解除した。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: ミュートしたチャンネルのId

## CHANNEL_VISIBILITY_CHANGED
チャンネルの可視状態が変更された。

### SSE
対象: 全員

TODO

## MESSAGE_CREATED
メッセージが投稿された。

### SSE
対象: 投稿チャンネルにハートビートを送信しているユーザー・投稿チャンネルに通知をつけているユーザー・メンションを受けたユーザー

+ `id`: 投稿されたメッセージのId

### FCM
#### data
+ `title`: チャンネル名
+ `body`: ユーザー名+メッセージ本体(100文字まで)
+ `path`: チャンネルのパス(`/users/:userID`または`/channels/:channelPath`)
+ `icon`: ユーザーアイコン
+ `tag`: `c:(チャンネルID)`
+ `vibration`: `[1000, 1000, 1000]`(文字列)
+ `image`: 添付ファイルに画像があればその(１つ目の)サムネイル画像のURL
+ `badge`: 通知バー用アイコンのURL

## MESSAGE_UPDATED
メッセージが更新された。

### SSE
対象: 投稿チャンネルにハートビートを送信しているユーザー

+ `id`: 更新されたメッセージのId

## MESSAGE_DELETED
メッセージが削除された。

### SSE
対象: 投稿チャンネルにハートビートを送信しているユーザー

+ `id`: 削除されたメッセージのId

## MESSAGE_READ
自分があるチャンネルのメッセージを読んだ。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: 読んだチャンネルId

## MESSAGE_STAMPED
メッセージにスタンプが押された。

### SSE
対象: 投稿チャンネルにハートビートを送信しているユーザー

+ `message_id`: メッセージId
+ `user_id`: スタンプを押したユーザーのId
+ `stamp_id`: スタンプのId
+ `count`: そのユーザーが押した数
+ `created_at`: そのユーザーがそのスタンプをそのメッセージに最初に押した日時

## MESSAGE_UNSTAMPED
メッセージからスタンプが外された。

### SSE
対象: 投稿チャンネルにハートビートを送信しているユーザー

+ `message_id`: メッセージId
+ `user_id`: スタンプを押したユーザーのId
+ `stamp_id`: スタンプのId

## MESSAGE_PINNED
メッセージがピン留めされた。

### SSE
対象: 投稿チャンネルにハートビートを送信しているユーザー

+ `id`: 作成されたピンID

## MESSAGE_UNPINNED
ピン留めされたメッセージのピンが外された。

### SSE
対象: 投稿チャンネルにハートビートを送信しているユーザー

+ `id`: 外されたピンID

## CLIP_CREATED
自分がメッセージをクリップした。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: 作成されたクリップのId

## CLIP_DELETED
自分がメッセージをアンクリップした。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: 削除されたクリップのId

## CLIP_MOVED
自分がクリップのフォルダを変更した。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: 移動されたクリップのId

## CLIP_FOLDER_CREATED
自分がクリップフォルダを作成した。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: 作成されたクリップフォルダのId

## CLIP_FOLDER_UPDATED
自分がクリップフォルダを更新した。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: 更新されたクリップフォルダのId

## CLIP_FOLDER_DELETED
自分がクリップフォルダを削除した。
端末間同期目的に使用される。

### SSE
対象: イベント発生元ユーザー

+ `id`: 削除されたクリップフォルダのId

## STAMP_CREATED
スタンプが新しく追加された。

### SSE
対象: 全員

+ `id`: 作成されたスタンプのId

## STAMP_MODIFIED
スタンプが修正された。

### SSE
対象: 全員

+ `id`: 修正されたスタンプのId

## STAMP_DELETED
スタンプが削除された。

### SSE
対象: 全員

+ `id`: 削除されたスタンプのId
